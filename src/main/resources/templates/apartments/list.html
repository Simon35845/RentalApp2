<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Список квартир</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}"/>
</head>
<body>
<h1>Список квартир</h1>
<form method="post" th:action="@{/logout}">
    <button class="main-link-button" type="submit">LOGOUT</button>
</form>

<table border="1">
    <thead>
    <tr>
        <th>ID</th>
        <th>Номер квартиры</th>
        <th>Этаж</th>
        <th>Количество комнат</th>
        <th>Общая площадь</th>
        <th>Адрес</th>
        <th sec:authorize="hasAuthority('ADMIN')">Действия</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="apartment : ${apartments.content}">
        <td th:text="${apartment.id}"></td>
        <td th:text="${apartment.apartmentNumber}"></td>
        <td th:text="${apartment.floor}"></td>
        <td th:text="${apartment.countOfRooms}"></td>
        <td th:text="${apartment.totalSquare}"></td>
        <td>
            <span th:if="${apartment.address != null}">
                [[${apartment.address.city}]], [[${apartment.address.street}]], [[${apartment.address.houseNumber}]]
            </span>
            <span th:unless="${apartment.address != null}">
                Нет данных
            </span>
        </td>
        <td sec:authorize="hasAuthority('ADMIN')">
            <a class="update-button" th:href="@{/apartments/edit/{id}(id=${apartment.id})}">Изменить</a>
            <a class="delete-button" th:href="@{/apartments/delete/{id}(id=${apartment.id})}">Удалить</a>
        </td>
    </tr>
    </tbody>
</table>

<div class="pagination-container">
    <form th:action="@{/apartments}" method="get" th:if="${apartments.hasPrevious()}">
        <input type="hidden" th:name="pageNumber" th:value="${apartments.number}">
        <button type="submit" class="pagination-button">Предыдущая страница</button>
    </form>
    <form th:action="@{/apartments}" method="get" th:if="${apartments.hasNext()}">
        <input type="hidden" th:name="pageNumber" th:value="${apartments.number + 2}">
        <button type="submit" class="pagination-button">Следующая страница</button>
    </form>
</div>

<div class="button-container-1" sec:authorize="hasAuthority('ADMIN')">
    <a class="save-link-button" th:href="@{apartments/save1}">Добавить новый адрес</a>
</div>

<div class="button-container-1">
    <a class="main-link-button" th:href="@{/main}">Перейти на главную страницу</a>
</div>
</body>
</html>